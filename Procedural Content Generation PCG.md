A tool to programmatically generate [[Asset]] instances,
using point sources and filtering to position them.
The generation is implemented using [[Visual Script]].

Is implemented as a [[Plugin]], enabled at [[Top Menu Bar]] > Edit > Plugins > Procedural Content Generation Framework (PCG).
There is also a utility plugin name Procedural Content Generation Framework (PCG) Geometry Script Interop.
See [[Geometry Script]].


# Create A PCG Graph

A PCG Graph is an [[Asset]] in the [[Content Browser]].
Create with [[Content Browser]] > right-click > PCG > PCG Graph.
PCG Graph [[Asset]]s often has a name starting with `PCG_`.
To add an instance of the PCG Graph to the [[Level]] drag it from the [[Content Browser]] to the [[Level Viewport]].
This creates a PCG Volume [[Actor]] instance.


# PCG Graph Editor

The PCG Graph is a [[Visual Script]].
It is edited in the PCG Graph Editor.
Has a Palette panel with all the nodes that can be used.
Has a [[Details Panel]] showing the settings of the currently selected node,
or the PCG Graph itself if no node is selected.
Has a Graph panel where nodes are created and connected.
Nodes are created either by dragging them from the Palette panel or by right-click in the Graph panel.
Has a Preview panel (Name?) that is used to inspect the values of data as it flows through the graph.

It has an Input node and an Output node.

Changes made in the PCG Graph Editor show up immediately on instance in the [[Level Viewport]],
so it is helpful to keep one in view while editing.


# Point Samplers

A central concept in PCG is points.
Points are generated by Samplers.
- Mesh Sampler: Generates points on the surface of a [[Static Mesh]].

## Mesh Sampler

Requires the Procedural Content Generation Framework (PCG) Geometry Script Interop plugin to be enabled.

Has [[Details Panel]] > Settings > Static Mesh that should be set to the [[Static Mesh Asset]] to generate point on.

Has [[Details Panel]] > Settings > Sample Method:
- One Point Per Triangle: 
- One Point Per Vertex:
- Poisson Sampling: 


# Point Manipulation

## Transform Points

Translate, rotate, and scale points, with some randomness.

## Copy Points

(
Not sure what this does really, describing how it was used in the [Unreal Fest 2023 PCG introduction presentation](https://youtu.be/LMQDCEiLaQY?t=1186).
)

Transform points from one coordinate system to another.
Has two inputs:
- Source: The points to transform from world space to the target space.
- Target: The target space.

The output is the Source points transformed to be around the Target points instead.
If there are many Target points then the Input points are duplicated for each.

The Target can be the location of an [[Actor]] to make the points be around that [[Actor]].
See _Get Actor Data_ below.

# Spawners

The purpose of a PCG graph is to instantiate things, i.e. to spawn them.
A Spawner node takes a set of points as input and generates a set of instances as output.
Different types of spawners have different types of outputs.
For example, the Static Mesh Spawner outputs [[Static Mesh]]es.

The spawned instances are placed relative to the owning PCG Volume.
Or maybe not, maybe it is in world space.

## Static Mesh Spawner

Spawns a [[Static Mesh]] at the input points.
Can have a selection of [[Static Mesh Asset]]s to randomly select from,
based on a weighted random distribution.

The set of [[Static Mesh Asset]]s that the Static Mesh Spawner selects among is set at [[Details Panel]] > Settings > Mesh Entries, which is an array.
Each element has:
- Static Mesh: The [[Static Mesh Asset]] to instantiate when this element is selected for a point.
- Weight: How likely this entry is to be selected for an  input point.


# World Inspection

PCG contains a bunch of nodes for inspecting the world.

## Get Actor Data

Get information about [[Actor]]s in the [[Level]].
Which [[Actor]] or [[Actor]]s is controlled with [[Details Panel]] > Settings > Actor Filter.
By default it inspects itself, the PCG Volume [[Actor]].
Can also be set to All World Actors.
In this mode we set Actor Selection to By Tag.
This is the [[Actor Tag]] that will be put on the [[Actor]]s we want to get data from.

[[Details Panel]] > Settings > Mode controls what in the [[Actor]] the node gets data for.
- Parse Actor Components: Get data for all [[Actor Component]]s in the [[Actor]].
- Get Single Point: Get the world location of the [[Actor]].
- Get Data From Property: Don't know.
- Get Data From PCG Component: Don't know.
- Get Data From PCG Component Or Parse Components: Don't know.

The output of Get Actor Data can be connected to a Points input pin.
A To Point node will be created.

# References

- [_Introduction to PCG Workflows in Unreal Engine 5 | Unreal Fest 2023_ by Epic Games @ youtube.com 2023](https://www.youtube.com/live/LMQDCEiLaQY)
